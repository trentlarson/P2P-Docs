<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<head>
<title></title>

<script type="text/javascript" src="js/jquery-1.5.1.min.js"></script>
<script type="text/javascript" src="js/diff_match_patch_uncompressed.js"></script>

<script type="text/javascript">

// from http://www.netlobo.com/url_query_string_javascript.html
function gup( name )
{
  name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
  var regexS = "[\\?&]"+name+"=([^&#]*)";
  var regex = new RegExp( regexS );
  var results = regex.exec( window.location.href );
  if( results == null )
    return "";
  else
    return unescape(results[1]); // I added the unescape: looks like Titanium doesn't unencode this internal stuff.
}

var dmp = new diff_match_patch();

$(document).ready(function() {

  var filename, file, contents;
  filename = gup("file1");
  file = Titanium.Filesystem.getFile(filename);
  contents = file.read() + ""; // without the "" it gives no results
  $('#text1').text(contents);
  
  filename = gup("file2");
  file = Titanium.Filesystem.getFile(filename);
  contents = file.read() + "";
  $('#text2').text(contents);
  
  var text1 = $('#text1').text();
  var text2 = $('#text2').text();
  var d = dmp.diff_main(text1, text2);
  var ds = dmp.diff_prettyHtml(d);
  $('#output').html(ds);

});
</script>

</head>
<body>

<div>
  <div style="width:50%; float:left;">
    <pre><span id="text1"></span></pre>
  </div>
  <div style="width:50%; float:left;">
    <pre><div id="text2"></div></pre>
  </div>
  <hr>
  <div>
    <pre><span id="output"></span></pre>
  </div>
</div>

</body>
</html>